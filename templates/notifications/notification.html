{% load static i18n hrms_tag %}

{% load static %}
<style>
  .theme-setting-wrapper {
    max-height: 50vh; /* Adjust the height as needed */
    overflow-y: auto; /* Enable vertical scrolling */
  }
</style>

<div class="theme-setting-wrapper">
  <div id="notification" class="settings-panel">
    <i class="settings-close ti-close"></i>
    <p class="settings-heading">
      {% trans 'Notifications' %} {{count}}
    </p>

    {% if pending_leaves %}
      {% for leave in pending_leaves %}
        <a class="dropdown-item preview-item d-flex align-items-center" href="{% url 'leave_application_detail' slug=leave.leaveApplication.slug %}">
          <div class="preview-thumbnail me-3">
            <img src="{{ leave.leaveApplication.appliedBy.personal_detail.avatar.url }}" alt="Avatar" class="img-sm profile-pic rounded-circle" />
          </div>
          <div class="preview-item-content flex-grow-1">
            <p class="preview-subject ellipsis font-weight-medium text-dark mb-1">{{ leave.leaveApplication.appliedBy.get_full_name }}</p>
            <p class="fw-light small-text mb-0">Applied for {{ leave.leaveApplication.applicationNo }}</p>
          </div>
        </a>
      <div class="dropdown-divider"></div>
      {% endfor %}
    {% endif %}

    {% if pending_tours %}
      {% for tour in pending_tours %}
        <a class="dropdown-item preview-item d-flex align-items-center" href="{% url 'tour_application_detail' slug=tour.slug %}">
          <div class="preview-thumbnail me-3">
            <img src="{{ tour.applied_by.personal_detail.avatar.url }}" alt="Avatar" class="img-sm profile-pic rounded-circle" />
          </div>
          <div class="preview-item-content flex-grow-1">
            <p class="preview-subject ellipsis font-weight-medium text-dark mb-1">{{ tour.applied_by.get_full_name }}</p>
            <p class="fw-light small-text mb-0">
              Applied for tour from <br />{{ tour.from_destination }} â†’ {{ tour.to_destination }}
            </p>
          </div>
        </a>
      <div class="dropdown-divider"></div>
      {% endfor %}
    {% endif %}

    {% if pending_reg %}
      {% for reg in pending_reg %}
        <a class="dropdown-item preview-item d-flex align-items-center" href="{% url 'event_detail' slug=reg.slug %}">
          <div class="preview-thumbnail me-3">
            <img src="{{ reg.applied_by.personal_detail.avatar.url }}" alt="Avatar" class="img-sm profile-pic rounded-circle" />
          </div>
          <div class="preview-item-content flex-grow-1">
            <p class="preview-subject ellipsis font-weight-medium text-dark mb-1">{{ reg.applied_by.get_full_name }}</p>
            <p class="fw-light small-text mb-0">Applied for regularization of {{ reg.reg_status }}</p>
          </div>
        </a>
      <div class="dropdown-divider"></div>
      {% endfor %}
    {% endif %}
  </div>
</div>
